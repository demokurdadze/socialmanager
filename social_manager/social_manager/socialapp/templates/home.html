{% extends "base_generic.html" %}
    {% load static i18n %}

    {% block title %}{% trans "Dashboard" %}{% endblock title %}
    {% block header_title %}{% trans "Dashboard" %}{% endblock header_title %}

    {% block content %}

      <h1 class="welcome-heading">{% blocktrans with user_name=request.user.username %}Welcome, {{ user_name }}!{% endblocktrans %}</h1>
      <p class="info-text">{% trans "Manage your connected pages and conversations." %}</p>

      {# Dashboard Cards Grid #}
      <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1.5rem;">

        {# Page Connection Card - Updated #}
        <div class="card">
            <div class="card-header">
                <h3 class="card-title">{% trans "Page Connections" %}</h3>
                <p class="card-description">{% trans "Status of your Facebook/Instagram pages." %}</p>
            </div>
            <div class="card-content">
               {% if user.is_authenticated %}
                   {% if has_connected_pages %}
                        <p>
                            <span class="nav-status-indicator nav-status-ok" style="margin-right: 0.5rem;">{% trans "Connected" %}</span>
                            {% blocktrans count count=connected_pages_count %}
                            You have {{ count }} page connected.
                            {% plural %}
                            You have {{ count }} pages connected.
                            {% endblocktrans %}
                        </p>
                   {% else %}
                       <p>{% trans "You haven't connected any Facebook or Instagram pages yet." %}</p>
                   {% endif %}
               {% else %}
                   <p>{% trans "Login to manage page connections." %}</p>
               {% endif %}
            </div>
             <div class="card-footer">
                 {% if user.is_authenticated %}
                     <a href="{% url 'connected_pages_list' %}" class="button button-secondary button-sm">{% trans "Manage Pages" %}</a>
                     {% if not has_connected_pages %}
                         <a href="{% url 'meta_auth' %}" class="button button-primary button-sm">{% trans "Connect First Page" %}</a>
                     {% endif %}
                 {% else %}
                     <a href="{% url 'account_login' %}" class="button button-secondary button-sm">{% trans "Login" %}</a>
                 {% endif %}
            </div>
        </div>

        {# Inbox Summary Card (Example) #}
        <div class="card">
            <div class="card-header">
                <h3 class="card-title">{% trans "Recent Activity" %}</h3>
                <p class="card-description">{% trans "Quick access to conversations." %}</p>
            </div>
            <div class="card-content">
               {% if has_connected_pages %}
                   <p>{% trans "Check your inbox for recent messages across your pages." %}</p>
               {% else %}
                   <p>{% trans "Connect a page to start receiving messages." %}</p>
               {% endif %}
            </div>
             <div class="card-footer">
                 {% if has_connected_pages %}
                     <a href="{% url 'inbox' %}" class="button button-primary button-sm">{% trans "Go to Inbox" %}</a>
                 {% endif %}
                 <a href="{% url 'test_ai_conversation' %}" class="button button-ghost button-sm">{% trans "Test AI" %}</a>
            </div>
        </div>

        {# Quick Actions/Info Card (Example) #}
         <div class="card">
            <div class="card-header">
                <h3 class="card-title">{% trans "AI Configuration" %}</h3>
                 <p class="card-description">{% trans "Prompts are configured per page." %}</p>
            </div>
            <div class="card-content">
               <p>{% trans "You can set unique AI instructions, personality, and context for each connected page." %}</p>
            </div>
            <div class="card-footer">
                <a href="{% url 'connected_pages_list' %}" class="button button-secondary button-sm">{% trans "Configure Prompts" %}</a>
            </div>
        </div>

      </div> {# End Grid #}

    {% endblock content %}